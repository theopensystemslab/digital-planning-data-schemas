{
  "$id": "@next",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "anyOf": [
    {
      "$ref": "#/definitions/PlanningPermissionApplication"
    },
    {
      "$ref": "#/definitions/PriorApprovalApplication"
    },
    {
      "$ref": "#/definitions/WorksToTreesApplication"
    }
  ],
  "definitions": {
    "ApplicationTypeKeys": {
      "enum": [
        "advertConsent",
        "amendment",
        "amendment.minorMaterial",
        "amendment.nonMaterial",
        "approval",
        "approval.conditions",
        "approval.reservedMatters",
        "complianceConfirmation",
        "environmentalImpact",
        "environmentalImpact.scoping",
        "environmentalImpact.screening",
        "hazardousSubstanceConsent",
        "hedgerowRemovalNotice",
        "landDrainageConsent",
        "ldc",
        "ldc.breachOfCondition",
        "ldc.existing",
        "ldc.listedBuildingWorks",
        "ldc.proposed",
        "listed",
        "notifyCompletion",
        "obligation",
        "obligation.discharge",
        "obligation.modify",
        "onshoreExtractionOilAndGas",
        "onshoreExtractionOilAndGas.other",
        "onshoreExtractionOilAndGas.pp.extension",
        "onshoreExtractionOilAndGas.pp.waste",
        "onshoreExtractionOilAndGas.pp.working",
        "onshoreExtractionOilAndGas.review",
        "onshoreExtractionOilAndGas.variation",
        "pa",
        "pa.part1.classA",
        "pa.part1.classAA",
        "pa.part3.classG",
        "pa.part3.classM",
        "pa.part3.classMA",
        "pa.part3.classN",
        "pa.part3.classQ",
        "pa.part3.classR",
        "pa.part3.classS",
        "pa.part3.classT",
        "pa.part3.classV",
        "pa.part4.classBB",
        "pa.part4.classBC",
        "pa.part4.classCA",
        "pa.part4.classE",
        "pa.part6",
        "pa.part6.classA",
        "pa.part6.classB",
        "pa.part6.classE",
        "pa.part7.classC",
        "pa.part7.classM",
        "pa.part9.classD",
        "pa.part11.classB",
        "pa.part14.classA",
        "pa.part14.classB",
        "pa.part14.classJ",
        "pa.part14.classK",
        "pa.part14.classOA",
        "pa.part16.classA",
        "pa.part17",
        "pa.part17.classB",
        "pa.part17.classC",
        "pa.part17.classG",
        "pa.part18.classA",
        "pa.part19.classTA",
        "pa.part20.classA",
        "pa.part20.classAA",
        "pa.part20.classAB",
        "pa.part20.classAC",
        "pa.part20.classAD",
        "pa.part20.classZA",
        "pp",
        "pp.full",
        "pp.full.advertConsent",
        "pp.full.demolition",
        "pp.full.fastTrack.affordable",
        "pp.full.householder",
        "pp.full.householder.listed",
        "pp.full.householder.retro",
        "pp.full.major",
        "pp.full.major.technicalDetails",
        "pp.full.major.technicalDetails.waste",
        "pp.full.major.waste",
        "pp.full.minor",
        "pp.full.minor.listed",
        "pp.full.minor.technicalDetails",
        "pp.mineralExtraction",
        "pp.outline",
        "pp.outline.all",
        "pp.outline.some",
        "pp.outline.minor",
        "pp.outline.minor.all",
        "pp.outline.minor.some",
        "pp.outline.major",
        "pp.outline.major.all",
        "pp.outline.major.all.waste",
        "pp.outline.major.some",
        "pp.outline.major.some.waste",
        "pp.pip",
        "rightsOfWayOrder",
        "wtt",
        "wtt.consent",
        "wtt.notice"
      ],
      "type": "string"
    },
    "PAApplicationData": {
      "additionalProperties": false,
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        }
      },
      "required": [
        "applicationType"
      ],
      "type": "object"
    },
    "PPApplicationData": {
      "additionalProperties": false,
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        },
        "ppSpecificProperty": {
          "type": "number"
        }
      },
      "required": [
        "applicationType",
        "ppSpecificProperty"
      ],
      "type": "object"
    },
    "PPUser": {
      "additionalProperties": false,
      "properties": {
        "ppSpecificProperty": {
          "type": "boolean"
        },
        "role": {
          "enum": [
            "applicant",
            "agent",
            "proxy"
          ],
          "type": "string"
        }
      },
      "required": [
        "ppSpecificProperty",
        "role"
      ],
      "type": "object"
    },
    "PlanningPermissionApplication": {
      "additionalProperties": false,
      "description": "Application for a \"Planning Permission\" project",
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        },
        "data": {
          "additionalProperties": false,
          "properties": {
            "application": {
              "$ref": "#/definitions/PAApplicationData"
            },
            "user": {
              "$ref": "#/definitions/PPUser"
            }
          },
          "required": [
            "user",
            "application"
          ],
          "type": "object"
        }
      },
      "required": [
        "applicationType",
        "data"
      ],
      "type": "object"
    },
    "PriorApprovalApplication": {
      "additionalProperties": false,
      "description": "Application for a \"Prior Approval\" project",
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        },
        "data": {
          "additionalProperties": false,
          "properties": {
            "application": {
              "$ref": "#/definitions/PPApplicationData"
            },
            "user": {
              "$ref": "#/definitions/UserBase"
            }
          },
          "required": [
            "user",
            "application"
          ],
          "type": "object"
        }
      },
      "required": [
        "applicationType",
        "data"
      ],
      "type": "object"
    },
    "UserBase": {
      "additionalProperties": false,
      "properties": {
        "role": {
          "enum": [
            "applicant",
            "agent",
            "proxy"
          ],
          "type": "string"
        }
      },
      "required": [
        "role"
      ],
      "type": "object"
    },
    "WTTApplicationData": {
      "additionalProperties": false,
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        },
        "wttSpecificProperty": {
          "type": "number"
        }
      },
      "required": [
        "applicationType",
        "wttSpecificProperty"
      ],
      "type": "object"
    },
    "WTTUser": {
      "additionalProperties": false,
      "properties": {
        "role": {
          "enum": [
            "applicant",
            "agent",
            "proxy"
          ],
          "type": "string"
        },
        "wttSpecificProperty": {
          "type": "boolean"
        }
      },
      "required": [
        "role",
        "wttSpecificProperty"
      ],
      "type": "object"
    },
    "WorksToTreesApplication": {
      "additionalProperties": false,
      "description": "Application for a \"Works to trees\" project",
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationTypeKeys"
        },
        "data": {
          "additionalProperties": false,
          "properties": {
            "application": {
              "$ref": "#/definitions/WTTApplicationData"
            },
            "user": {
              "$ref": "#/definitions/WTTUser"
            }
          },
          "required": [
            "user",
            "application"
          ],
          "type": "object"
        }
      },
      "required": [
        "applicationType",
        "data"
      ],
      "type": "object"
    }
  },
  "description": "The root specification for a planning application in England generated by a digital planning service",
  "title": "App"
}